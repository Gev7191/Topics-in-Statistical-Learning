sol = cbind(city_search[1:10], result)
city_search = rep(0, sum(indNA_coord))
result = rep(0, 3)
# result = matrix(rep(0, sum(indNA_coord)*3), sum(indNA_coord), 3)
# dim(result)
# city_search = 0
# result = rep(0, 3)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = ulist(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
# initialize variables
city_search = rep(0, sum(indNA_coord))
result = rep(0, 3)
# result = matrix(rep(0, sum(indNA_coord)*3), sum(indNA_coord), 3)
# dim(result)
# city_search = 0
# result = rep(0, 3)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = unlist(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
city_search = rep(0, sum(indNA_coord))
result = rep(0, 3)
# result = matrix(rep(0, sum(indNA_coord)*3), sum(indNA_coord), 3)
# dim(result)
# city_search = 0
# result = rep(0, 3)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = unlist(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE), , use.names=FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
city_search = rep(0, sum(indNA_coord))
result = list()
# result = matrix(rep(0, sum(indNA_coord)*3), sum(indNA_coord), 3)
# dim(result)
# city_search = 0
# result = rep(0, 3)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = unlist(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE), , use.names=FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
city_search = rep(0, sum(indNA_coord))
result = list()
# result = matrix(rep(0, sum(indNA_coord)*3), sum(indNA_coord), 3)
# dim(result)
# city_search = 0
# result = rep(0, 3)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i] = unlist(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE), , use.names=FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
result
View(result)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
class(a)
result = data.frame()
result
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
result
View(result)
?data.frame
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
class(a)
city_search = 0
result = 0
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
result
result = data.frame(0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
result
View(result)
a = 0
a
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
city_search = 0
result = data.frame(0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
city_search = 0
result = data.frame(0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,1:3] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
city_search = 0
result = data.frame(0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,1:3] = data.frame(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
a = 0
a
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
a[2,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a[2,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
class(a)
i=1
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
city_search
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
result
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
#
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
#
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
#
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
#
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
#
result
result = 0
result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
result
geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
b = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
b = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
b
b
b = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
b = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
b
a = 0
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
city_search = 0
coor = 0
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
result[i,]
coor = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
city_search = 0
coor = 0
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
# result[i,]
coor = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
coor
View(coor)
city_search = 0
res = 0
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
# result[i,] <-
# result[i,]
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# result[i,] <- google_geocode(address = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", "), key = key)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
i=1
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
city_search[i]
geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res[i,]
res = c(0, 0, 0)
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res[i,]
res = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res
city_search = 0
res = c(0, 0, 0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
res
city_search = 0
res = c(0, 0, 0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
city_search = 0
res = c(0, 0, 0)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[1,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
res = as.data.frame(c(0, 0, 0))
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[1,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
res
c(0, 0, 0)
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), nrow = 1, 3)
res
res = as.data.frame(matrix(c(0, 0, 0), nrow = 1, 3))
res
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), nrow = 1, 3))
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[1,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
res
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), nrow = 1, 3))
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
res
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
a
names(res)
names(res) = c("lon", "lat", "address")
names(res)
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# while (any(is.na(result[i,]))){
#   result[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# }
}
res
i=1
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res[i,]
(any(is.na(result[i,])))
any(is.na(result[i,]))
is.na(result[i,])
any(is.na(res[i,]))
while (any(is.na(res[i,]))){
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
res[i,]
# initialize variables
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), 1, 3))
names(res) = c("lon", "lat", "address")
# retrieve lat and long
for (i in 1:10){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# retrieve still missing data
while (any(is.na(res[i,]))){
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
}
res
sol = cbind(city_search[1:10], res)
sol
View(sol)
str(sol)
sol[,2:3]
sol[,2:3]
?read.csv
# save it as a csv file to save time
write.csv(sol, file = "geo_NAcoordinates", row.names=FALSE)
sum(indNA_coord)
indNA_coord = is.na(geo$latitude) | is.na(geo$longitude)
# corresponding obs
NA_coord = geo[indNA_coord,]
# google key for API
# https://developers.google.com/maps/documentation/geocoding/get-api-key
# register_google(key = key)
# key = "AIzaSyBqoOaevlfn5kTtQTOc1muK4lREAaUjPy8"
# install.packages("googleway")
# require(googleway)
# initialize variables
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), 1, 3))
names(res) = c("lon", "lat", "address")
# retrieve lat and long
for (i in 1:sum(indNA_coord)){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# retrieve still missing data, because of existing problems with API
while (any(is.na(res[i,]))){
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
}
}
city_search[i]
View(res)
warning(res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
warning()
warning()
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
warning()
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
error()
tryCatch(res[i,])
tryCatch(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
tryCatch(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
a = tryCatch(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
a
# initialize variables
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), 1, 3))
names(res) = c("lon", "lat", "address")
# retrieve lat and long
for (i in 1:sum(indNA_coord)){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
error()
a = tryCatch(geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE))
# retrieve still missing data, because of existing problems with API
while (any(is.na(res[i,])) & j < 15){
j = 0
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
j = j + 1
}
}
# initialize variables
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), 1, 3))
names(res) = c("lon", "lat", "address")
# retrieve lat and long
for (i in 1:sum(indNA_coord)){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# retrieve still missing data, because of existing problems with API
while (any(is.na(res[i,])) & j < 15){
j = 0
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
j = j + 1
}
}
# initialize variables
city_search = 0
res = as.data.frame(matrix(c(0, 0, 0), 1, 3))
names(res) = c("lon", "lat", "address")
# retrieve lat and long
for (i in 1:sum(indNA_coord)){
# city searched
city_search[i] = paste(c(as.character(NA_coord$town_name[i]), as.character(NA_coord$postal_code[i]), as.character(NA_coord$department[i]), "France"), sep=" ", collapse = ", ")
# solution
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
# retrieve still missing data, because of existing problems with API
j = 0
while (any(is.na(res[i,])) & j < 15){
res[i,] = geocode(city_search[i], output = "latlona", source = c("google", "dsk"), messaging = FALSE)
j = j + 1
}
}
